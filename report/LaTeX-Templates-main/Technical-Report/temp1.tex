\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{geometry}
\usepackage{mathrsfs}
\usepackage{yfonts}
\usepackage{tikz}
\usepackage{forest}
\usetikzlibrary{trees}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
 }
\begin{document}
\section{Method}

The server \textit{ticks} every \(0.1\) seconds, wherewithin one command can be sent from each of the players and from the trainer. The program runs a loop in the background which sends a command from the trainer to the server continually (at each tick), requesting information about the state of the field at that time step. A state \(S_i \in \mathcal{S}\) where \(i \in \mathbb{N}\) contains the actual field state as well as the (possibly delayed) information thereabout which is known by the actors. Field-state information include the position and velocity of the ball as well as the speed, velocity and orientation of the players.

The players are represented as a set \(\mathcal{P}=\left\{p_1,\cdots,p_{12}\right\}\). A player \(p \in \mathcal{P}\) is a pair \((c, f)\) where \(c \in \mathcal{C} := \mathbb{N}^6\) is a vector representing the \textit{skill configuration} for that player and \(f : \mathcal{S}\times \mathcal{C} \to \mathcal{S}\) is the the player's given task from a set of possible tasks \(\mathcal{A}\), all of which return within one tick.

At each time step \(i\), a background process executes each player's ``configured'' task
\[
		F := \left\{ f_p^c \,\middle|\, f_p^c = \lambda s.f_p(s, c), f_p = \pi_f(p), c = \pi_c(p), p \in\mathcal{P} \right\}
\]
which sends commands from those players to the server, resulting in the next state 
\[
		\mathcal{S} \ni S_{i} = \left\{
			\begin{array}{cl}
				S_0 & : \ i = 0 \\
					\mathfrak{U} \left( \left(\underset{f_p^c\in F}\bigcirc f_p^c\right)(S_{i-1}) \right) & : \ \text{otherwise}
			\end{array}
		\right.
\]
where \(S_0\) is the initial configuration of the game field and \(\mathfrak{U}\) is an unknown function representing collision handling and other unknown behaviours of the server simulation and program-server interface (such as the delayed field information). %RANDOMNESS MAKES THE SOLUTION-FINDING MODELING HARDER -- STATISTICS AND SUCH

[ADD INFO ABOUT STRUCTURE OF BT/f AND THE DERIVATION THEREOF]
\begin{figure}[tbp]
\centering
\begin{forest}
  for tree={draw},
		[Ø
			%[\(\to\)
				[?
					[\textit{Ball near location?}]
					[\(\to\)
						[?
							[\textit{Player near ball?}]
							[\(\to\)
								[?
									[\textit{Player at breaking distance?}]
									[\(\to\)
										[?
											[\textit{Player facing target (far)?}]
											[\texttt{alignFar()}]
										]
										[\texttt{goTowardFar()}]
									]
								]
								[\(\to\)
									[?
										[\textit{Player facing target (close)?}]
										[\texttt{alignClose()}]
									]
									[\texttt{goTowardClose()}]
								]
							]
						]
						[\(\to\)
							[?
								[\textit{Player aligned to kick?}]
								[\texttt{alignKick()}]
							]
						]
					]
				]
			%]
		]
\end{forest}
\caption{tree mf}
\label{fig:gene}
\end{figure}
%The structure of the behaviour tree is generated by the following logic: \(\text{Kick ball} \Rightarrow \text{Close to ball} \Rightarrow \text{Go to ball}\), \(\mathscr{K} \subseteq \mathscr{C}\)

Let the algebraic structure \(G\) be generated by the maps \(\mathcal{A}\) composition-wise.
\begin{equation}
		G:=\left(\langle\mathcal{A}\rangle,\circ\right)
\end{equation}
FOR WHICH \(c\) IS \(| s_{BT} |\) LIKELY TO BE THE SMALLEST?

IS \(f\) KNOWN OR UNKNOWN?

%Låt avbildningsmängden \(\mathscr{S}_x\) vara samtliga avbildningssammansättningar som ekvivalerar en avbildning \(x\in G\), med andra ord samtliga \textit{lösningar} till \(x\) givet handlingsmänden \(\mathfrak{A}\).
Låt mängden \(\mathscr{S}_x\) vara samtliga avbildningssammansättningar som ekvivalerar en avbildning \(x\in G\) -- d.v.s. samtliga \textit{lösningar} till \(x\) givet handlingsmänden \(\mathfrak{A}\).

THE BEHAVIOUR TREE GENERATES THE FOLLOWING SET

\(x\) MÅSTE VARA EN VINSTMÄNGD ISTÄLLET FÖR EN ENSKILD AVBILDNING
\begin{equation}
%		\mathscr{S}_x = \left\{ (f_1,...,f_n) \in \mathfrak{A}^n \,\middle|\, x\in G\wedge\overset{1}{\underset{i=n}\bigcirc} f_i = x \right\}
		\mathscr{S}_x = \left\{ s \in \bigcup_{n\in \mathbb{N}}\mathfrak{A}^n \,\middle|\, x\in G\wedge\overset{1}{\underset{i=|s|}\bigcirc} s_i = x \right\}
\end{equation}
Avbildningsmängden \(\mathscr{F}_x\) definieras som samtliga \textit{kortaste} lösningar till \(x\).

THE GENETIC ALGORITHM TRIES TO APPROXIMATE THE FOLLOWING SET \begin{equation}
		\mathscr{F}_x=\left\{s\in\mathscr{S}_x \,\middle|\, s'\in \mathscr{S}_x \Rightarrow |s|\le|s'|\right\}
\end{equation}

[ADD INFO ABOUT GA]

\end{document}
